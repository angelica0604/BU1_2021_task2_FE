<input matInput type="text" [(ngModel)]="search">
<button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
  <mat-icon>close</mat-icon>
</button>

<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

  <!-- id  -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> ID</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownId" class="example-form-field">
        <mat-form-field >
          <mat-label>ID</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.id">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownId>
        {{element.id}}
      </ng-template>
    </td>
  </ng-container>

  <!-- age Column -->
  <ng-container matColumnDef="age">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Age</th>
    <td mat-cell *matCellDef="let element" >
      <div *ngIf="element.state === 'add'; else shownAge">
        <mat-form-field class="example-form-field">
          <mat-label>Age</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.age">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownAge>
        {{element.age}}
      </ng-template>
    </td>
  </ng-container>

  <!-- gender Column -->
  <ng-container matColumnDef="gender">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownGender">
        <mat-form-field class="example-form-field">
          <mat-label>Gender</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.gender">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownGender>
        {{element.gender}}
      </ng-template>
    </td>
  </ng-container>

  <!-- company Column -->
  <ng-container matColumnDef="company">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Company</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownCompany">
        <mat-form-field class="example-form-field">
          <mat-label>Company</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.company">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownCompany>
        {{element.company}}
      </ng-template>
    </td>
  </ng-container>

  <!-- email Column -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownEmail">
        <mat-form-field class="example-form-field">
          <mat-label>Email</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.email">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownEmail>
        {{element.email}}
      </ng-template>
    </td>
  </ng-container>

  <!-- phone Column -->
  <ng-container matColumnDef="phone">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownEmail">
        <mat-form-field class="example-form-field">
          <mat-label>Phone</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.phone">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownEmail>
        {{element.phone}}
      </ng-template>
    </td>
  </ng-container>

  <!-- address Column -->
  <ng-container matColumnDef="address">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Address</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownAddressId">
        <mat-form-field class="example-form-field">
          <mat-label>Address</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.address">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownAddressId>
        {{element.address}}
      </ng-template>
    </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
    <td mat-cell *matCellDef="let element">
      <div *ngIf="element.state === 'add'; else shownName">
        <mat-form-field class="example-form-field">
          <mat-label>Name</mat-label>
          <input matInput type="text" [(ngModel)]="inputUser.name">
          <button *ngIf="value" matSuffix mat-icon-button aria-label="Clear" (click)="value=''">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <ng-template #shownName>
        {{element.name}}
      </ng-template>
    </td>
  </ng-container>

  <!-- actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Действия</th>
    <td mat-cell *matCellDef="let element" style="width: 120px">
      <div *ngIf="element.state === 'add'; else shownButton">
        <button (click)="clickedDone(element)" mat-icon-button color="primary">
          <mat-icon>done</mat-icon>
        </button>
        <button (click)="clickedCancel(element)" mat-icon-button color="warn">
          <mat-icon>cancel</mat-icon>
        </button>
      </div>

      <ng-template #shownButton>
        <button (click)="clickEdit(element)" mat-icon-button color="primary" [disabled] = "isEditing || isAdding">
          <mat-icon>mode_edit</mat-icon>
        </button>
        <button (click)="clickedDelete(element)" mat-icon-button color="warn" [disabled] = "isEditing || isAdding">
          <mat-icon>delete_forever</mat-icon>
        </button>
      </ng-template>
    </td>
  </ng-container>


  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table><br>
<button (click)="clickAdd()" class="add"
        mat-stroked-button color="primary" [disabled] = "isEditing || isAdding">Добавить
</button>
